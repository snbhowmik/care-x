{
    "abi": [
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "patient",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "device",
                    "type": "address"
                }
            ],
            "name": "AccessGranted",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "patient",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "device",
                    "type": "address"
                }
            ],
            "name": "AccessRevoked",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "patient",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "doctor",
                    "type": "address"
                }
            ],
            "name": "DataShared",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "patient",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "doctor",
                    "type": "address"
                }
            ],
            "name": "DataUnshared",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "patient",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "internalType": "string",
                    "name": "ipfsHash",
                    "type": "string"
                },
                {
                    "indexed": false,
                    "internalType": "bool",
                    "name": "isCritical",
                    "type": "bool"
                },
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "timestamp",
                    "type": "uint256"
                }
            ],
            "name": "RecordAdded",
            "type": "event"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_patient",
                    "type": "address"
                },
                {
                    "internalType": "string",
                    "name": "_ipfsHash",
                    "type": "string"
                },
                {
                    "internalType": "bool",
                    "name": "_isCritical",
                    "type": "bool"
                }
            ],
            "name": "addRecord",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_device",
                    "type": "address"
                }
            ],
            "name": "authorizeDevice",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                }
            ],
            "name": "authorizedDevices",
            "outputs": [
                {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                },
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                }
            ],
            "name": "dataAccessList",
            "outputs": [
                {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_patient",
                    "type": "address"
                }
            ],
            "name": "getRecords",
            "outputs": [
                {
                    "components": [
                        {
                            "internalType": "string",
                            "name": "ipfsHash",
                            "type": "string"
                        },
                        {
                            "internalType": "uint256",
                            "name": "timestamp",
                            "type": "uint256"
                        },
                        {
                            "internalType": "bool",
                            "name": "isCritical",
                            "type": "bool"
                        },
                        {
                            "internalType": "address",
                            "name": "deviceId",
                            "type": "address"
                        }
                    ],
                    "internalType": "struct HealthRecord.Record[]",
                    "name": "",
                    "type": "tuple[]"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_doctor",
                    "type": "address"
                }
            ],
            "name": "grantDataAccess",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                },
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "name": "patientRecords",
            "outputs": [
                {
                    "internalType": "string",
                    "name": "ipfsHash",
                    "type": "string"
                },
                {
                    "internalType": "uint256",
                    "name": "timestamp",
                    "type": "uint256"
                },
                {
                    "internalType": "bool",
                    "name": "isCritical",
                    "type": "bool"
                },
                {
                    "internalType": "address",
                    "name": "deviceId",
                    "type": "address"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_doctor",
                    "type": "address"
                }
            ],
            "name": "revokeDataAccess",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "_device",
                    "type": "address"
                }
            ],
            "name": "revokeDevice",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        }
    ],
    "bytecode": "608060405234801561001057600080fd5b506116ed806100206000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c80636fe3c2b2116100665780636fe3c2b21461013057806387a4ab721461014c578063933eb9ca1461016857806394f0df6114610184578063a0076e84146101b757610093565b80630da192181461009857806317b28df3146100c85780631a156f49146100f85780633fbef88014610114575b600080fd5b6100b260048036038101906100ad9190610cb0565b6101e7565b6040516100bf9190610d0b565b60405180910390f35b6100e260048036038101906100dd9190610cb0565b610216565b6040516100ef9190610d0b565b60405180910390f35b610112600480360381019061010d9190610e98565b610245565b005b61012e60048036038101906101299190610f07565b6104cc565b005b61014a60048036038101906101459190610f07565b6105be565b005b61016660048036038101906101619190610f07565b6106b0565b005b610182600480360381019061017d9190610f07565b6107a2565b005b61019e60048036038101906101999190610f6a565b610893565b6040516101ae9493929190611047565b60405180910390f35b6101d160048036038101906101cc9190610f07565b610995565b6040516101de919061122f565b60405180910390f35b60016020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b60026020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b828073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806103065750600160008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b610345576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161033c906112c3565b60405180910390fd5b6000604051806080016040528085815260200142815260200184151581526020013373ffffffffffffffffffffffffffffffffffffffff1681525090506000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081908060018154018082558091505060019003906000526020600020906003020160009091909190915060008201518160000190816103ff91906114ef565b506020820151816001015560408201518160020160006101000a81548160ff02191690831515021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050508473ffffffffffffffffffffffffffffffffffffffff167febf8dbe094a4be25a952cf77bc8e0c3fd015174225bd26f66d60eca4def5afab8585426040516104bd939291906115c1565b60405180910390a25050505050565b6000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f7a7185450877ae08235ef6b8ce8b2530aa5ac760d1e40bcac9dd962422b0797b60405160405180910390a350565b6000600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f825c8be24eb0df19500f63e86c29e7d0d951e73056b889b891d85e40938d9b6e60405160405180910390a350565b6001600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fa95f0d184fd62f7b8296302d3f94c1a2fdfbd1c444e18b1313342b401d36c10060405160405180910390a350565b60018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f9f520b3bfc56d06f7065d10b4683b3f57ac8895d5026cd176dee95ce1454cb8d60405160405180910390a350565b600060205281600052604060002081815481106108af57600080fd5b9060005260206000209060030201600091509150508060000180546108d390611312565b80601f01602080910402602001604051908101604052809291908181526020018280546108ff90611312565b801561094c5780601f106109215761010080835404028352916020019161094c565b820191906000526020600020905b81548152906001019060200180831161092f57829003601f168201915b5050505050908060010154908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905084565b60608173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610a575750600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b610a96576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8d90611697565b60405180910390fd5b6000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b82821015610c335783829060005260206000209060030201604051806080016040529081600082018054610b2790611312565b80601f0160208091040260200160405190810160405280929190818152602001828054610b5390611312565b8015610ba05780601f10610b7557610100808354040283529160200191610ba0565b820191906000526020600020905b815481529060010190602001808311610b8357829003601f168201915b50505050508152602001600182015481526020016002820160009054906101000a900460ff161515151581526020016002820160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152505081526020019060010190610af4565b505050509050919050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610c7d82610c52565b9050919050565b610c8d81610c72565b8114610c9857600080fd5b50565b600081359050610caa81610c84565b92915050565b60008060408385031215610cc757610cc6610c48565b5b6000610cd585828601610c9b565b9250506020610ce685828601610c9b565b9150509250929050565b60008115159050919050565b610d0581610cf0565b82525050565b6000602082019050610d206000830184610cfc565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610d7982610d30565b810181811067ffffffffffffffff82111715610d9857610d97610d41565b5b80604052505050565b6000610dab610c3e565b9050610db78282610d70565b919050565b600067ffffffffffffffff821115610dd757610dd6610d41565b5b610de082610d30565b9050602081019050919050565b82818337600083830152505050565b6000610e0f610e0a84610dbc565b610da1565b905082815260208101848484011115610e2b57610e2a610d2b565b5b610e36848285610ded565b509392505050565b600082601f830112610e5357610e52610d26565b5b8135610e63848260208601610dfc565b91505092915050565b610e7581610cf0565b8114610e8057600080fd5b50565b600081359050610e9281610e6c565b92915050565b600080600060608486031215610eb157610eb0610c48565b5b6000610ebf86828701610c9b565b935050602084013567ffffffffffffffff811115610ee057610edf610c4d565b5b610eec86828701610e3e565b9250506040610efd86828701610e83565b9150509250925092565b600060208284031215610f1d57610f1c610c48565b5b6000610f2b84828501610c9b565b91505092915050565b6000819050919050565b610f4781610f34565b8114610f5257600080fd5b50565b600081359050610f6481610f3e565b92915050565b60008060408385031215610f8157610f80610c48565b5b6000610f8f85828601610c9b565b9250506020610fa085828601610f55565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610fe4578082015181840152602081019050610fc9565b60008484015250505050565b6000610ffb82610faa565b6110058185610fb5565b9350611015818560208601610fc6565b61101e81610d30565b840191505092915050565b61103281610f34565b82525050565b61104181610c72565b82525050565b600060808201905081810360008301526110618187610ff0565b90506110706020830186611029565b61107d6040830185610cfc565b61108a6060830184611038565b95945050505050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600082825260208201905092915050565b60006110db82610faa565b6110e581856110bf565b93506110f5818560208601610fc6565b6110fe81610d30565b840191505092915050565b61111281610f34565b82525050565b61112181610cf0565b82525050565b61113081610c72565b82525050565b6000608083016000830151848203600086015261115382826110d0565b91505060208301516111686020860182611109565b50604083015161117b6040860182611118565b50606083015161118e6060860182611127565b508091505092915050565b60006111a58383611136565b905092915050565b6000602082019050919050565b60006111c582611093565b6111cf818561109e565b9350836020820285016111e1856110af565b8060005b8581101561121d57848403895281516111fe8582611199565b9450611209836111ad565b925060208a019950506001810190506111e5565b50829750879550505050505092915050565b6000602082019050818103600083015261124981846111ba565b905092915050565b7f4e6f7420617574686f72697a656420746f20616464207265636f72647320666f60008201527f7220746869732070617469656e74000000000000000000000000000000000000602082015250565b60006112ad602e83610fb5565b91506112b882611251565b604082019050919050565b600060208201905081810360008301526112dc816112a0565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061132a57607f821691505b60208210810361133d5761133c6112e3565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026113a57fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82611368565b6113af8683611368565b95508019841693508086168417925050509392505050565b6000819050919050565b60006113ec6113e76113e284610f34565b6113c7565b610f34565b9050919050565b6000819050919050565b611406836113d1565b61141a611412826113f3565b848454611375565b825550505050565b600090565b61142f611422565b61143a8184846113fd565b505050565b5b8181101561145e57611453600082611427565b600181019050611440565b5050565b601f8211156114a35761147481611343565b61147d84611358565b8101602085101561148c578190505b6114a061149885611358565b83018261143f565b50505b505050565b600082821c905092915050565b60006114c6600019846008026114a8565b1980831691505092915050565b60006114df83836114b5565b9150826002028217905092915050565b6114f882610faa565b67ffffffffffffffff81111561151157611510610d41565b5b61151b8254611312565b611526828285611462565b600060209050601f8311600181146115595760008415611547578287015190505b61155185826114d3565b8655506115b9565b601f19841661156786611343565b60005b8281101561158f5784890151825560018201915060208501945060208101905061156a565b868310156115ac57848901516115a8601f8916826114b5565b8355505b6001600288020188555050505b505050505050565b600060608201905081810360008301526115db8186610ff0565b90506115ea6020830185610cfc565b6115f76040830184611029565b949350505050565b7f4163636573732044656e6965643a20596f7520646f206e6f742068617665207060008201527f65726d697373696f6e20746f207669657720746869732070617469656e74277360208201527f207265636f7264732e0000000000000000000000000000000000000000000000604082015250565b6000611681604983610fb5565b915061168c826115ff565b606082019050919050565b600060208201905081810360008301526116b081611674565b905091905056fea2646970667358221220b3a9d3281ce7e1bcaa6bae44ecc09a6c82a128009ba2d3d39341d6458b77e41864736f6c63430008130033"
}